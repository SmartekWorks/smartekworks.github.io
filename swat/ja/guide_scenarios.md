シナリオ作成
===

ここでは、SWATナレッジベースでシナリオやケースの作成方法を説明します。

プロジェクト、テストセットの作成
---

#### プロジェクト作成

SWATは、テストセットをグループ化し管理するするためにプロジェクトを使用しています。

1. メニュータグの*サービス設定*から**プロジェクト管理**を開きます。
2. 新しいプロジェクト作成ボタン <span class="glyphicon glyphicon-plus"></span> をクリックします。
3. **番号**と**タイトル**、プロジェクトの説明を記入し、新規をクリックします。
4. メニュータグの*テスト*から**プロジェクト**画面を開き、新しいプロジェクトが作成されていることを確認します。

#### テストセット作成

テストセットはシナリオの実行や課題を管理するためのメインコンテナです。テストセット単位でシナリオの実行設定を予めセットできます。また、テストセット単位でテストケースのインポート／エクスポートができます。

1. メニュータグの*テスト*から**プロジェクト**を開きます。
2. その下に**新しく作成したプロジェクト**を選択し、新しいテストセットを作成します。
3. **番号**と**タイトル**、プロジェクトの説明を記入し、新規をクリックします。
5. テストセット作成後、このテストセットは**シナリオ**画面に表示されます。 
6. デフォルトでコード`SG0001`として作成され、シナリオグループで確認できます。

#### シナリオグループについて

シナリオグループは、テストセット内のシナリオをグループします。主な目的はシナリオを分類することで、シナリオグループにタグを付けることでテストセット内のシナリオをフィルタリングすることができます。
ヒント：AOPのインターセプタが動くシナリオグループを定義するには、 `前`、`後`のような特別なタグを使うことができます。 

シナリオ作成
---

良いシナリオを設計することは容易ではないが、SWATでシナリオを作成することは簡単です。 

1. 既に作成したテストセットの**シナリオ**画面を開きます。
2. シナリオグループ`SG0001`の右側<span class="caret"></span>をクリックし、**シナリオ追加**を選択すると**シナリオビルダー** 画面が表示されます。 
3. **シナリオビルダー** は、3つのエリアに分かれます。:
 * **左エリア**: ナレッジベースからシステムオペレーション、フロー、オペレーションが表示されるエリアです。
 * **右上エリア**: シナリオを作成するエリアです。
 * **右下エリア**: シナリオの個々のパラメータや説明を含むプロパティをセットするエリアです。
4. システムオペレーションの **URLへアクセス**は、新しいシナリオフローに自動的に挿入されます。それはテストサイトのURLにアクセスしブラウザを立ち上げます。
5. シナリオ作成にあたり、左エリアからいくつかのシステムオペレーション、フロー、WebオペレーションをDragし、右エリアへDropしシナリオを作成します。 
6. それぞれのオペレーションでは、実行させるためのデータをパラメータにセットする必要があります。
7. シナリオ作成の上にあるシナリオタイトルボックスにタイトルを入力し、**新規**ボタンをクリックしシナリオを完了させます。
8. **シナリオ一覧**画面では、シナリオグループ`SG0001`配下に新しく作成したシナリオが確認できます。.

ヒント： <span class="glyphicon glyphicon-eye-open"></span> 検索ボックス横のボタンをクリックすると、システムオペレーション、フロー、Webオペレーションのヘルプ、概要、プレビュー画面が参照できます。

サンプルシナリオの作成
---

1. 新しいシナリオの**テストシナリオビルダー**で、システムオペレーションの**URLへ遷移**をクリックします。
2. **サイト**で`Bing`を選択すると、*Bing*のホームページへアクセスすることを意味します。その下の**URL**はブランクのままにします。
3. 左エリアでサイトを*Bing*サイトへ切り替えると、*Bing*と*BingSA*画面が確認できます。
4. シナリオ作成エリアへ*Bing*下の*検索*オペレーションをDrag & dropします。オペレーションはシナリオに追加され、有効化されます。 
5. このオペレーションのプロパティで<span class="glyphicon glyphicon-th-list"></span>、**Enter your search ...** はテキストボックスが検索ボックスを指し、**アクション選択**はこのオペレーション下の全てのアクションを指します。（このオペレーションの検索ボタンは一つです）
6. テキストボックスに直接キーワードを入力することができますが、ここでは変数を使用する方が良いでしょう。よって、 **Enter your search ...** への入力は`@{Keyword}`このように指定ください。（変数の利用方法の詳細は[Web Operation](ref_web_operation.md#Using_Variable) を参照ください。)
7. サンプル·シナリオでは、候補リストの代わりにクリック*検索*ボタンで項目を選択する必要があります。そこで、パラメータを無視するようにアクションの後にチェックボックスをオフにする必要があります。(パラメータを無視する方法の詳細は[Web Operation](ref_web_operation.md#Ignoring_Parameter)を参照ください。)
8. *BingSA*下の *Suggestion List* をDrag&Dropでシナリオ作成へ、下段に**sa_list**のセレクトボックスが表示されます。リスト名は前にインポートしたナレッジページです。
9. リストは入力に応じ変更され、アイコン（データ入力モードの切り替え）を二度クリックし、リストを**インデックスクエリモード**にします。フィールドへの入力値を引数`@{Index}`とし、ケース作成時はここの引数にセットされる数字がリストの順番を意味します。(照会モードの詳細はここを[Web Operation](ref_web_operation.md#Querying_Modes)参照ください、。)
10. これでサンプルシナリオは終了です。

シナリオへケースを追加
---

シナリオで変数設定をしている場合、シナリオに異なるケースとして異なるデータセットを追加することができます。データをシナリオから分離することで、データバリデーションテストを簡単に実施できます。

1. **シナリオ**から既に作成したテストセット画面を開きます。 
2. 新しく作成したシナリオ`S0001`の右端をクリックし、**ケースを追加**を選択します。 ケース作成・編集のダイアログが開き、シナリオで定義した変数名これら**タイトル**、 **Keyword**、**Index**を設定します。
3. 何か好きなタイトルを入力します。 **Keyword**には`automation`とし、**Index**には`2`とします。これらの意味は、検索ボックスに`automation`を入力、候補リストの2番目の候補を選択することを指します。
4. **Keyword**と**Index**に`test`と`1`を設定し、更に他のケースを追加するには上記手順を繰り返えします。 このケースの中で最後に作成したものを選びます。

ヒント：Excelフォーマットでテストセットのテーブルをexport/importすることができます。これを用いることで、Excel上で簡単にケースの追加、変更、削除ができます。

次へ
----

ここでシナリオとケースの作成方法を説明しました。次は実行サービスとしてこれらのケースを実行させます。

Go to [Executing Cases](guide_execution.md).