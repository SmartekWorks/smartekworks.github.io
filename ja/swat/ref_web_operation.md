Webオペレーション
===

Webオペレーションは、画面上のインタラクティブなオペレーションモデルです。SWATナレッジエンジンで画面を解析し、ナレッジルールによるWebオペレーションを抜粋します。画面実装に適したオペレーションを取得する方法の詳細はこちらを参照ください。 [Knowledge Rule DSL](ref_knowledge_rule.md)　また、編集やオペレーションのカスタマイズすることができます。また、こちらから関連情報の取得が可能です。 [Importing Pages](guide_knowledge.md).

Webオペレーションの使い方
---

シナリオ/フローの作成でWebオペレーションはシンプルでわかりやすいです。 シナリオフロー/ フローの上にWebオペレーションをdrag & dropし、オペレーションのパラメータを入力するだけです。パラメータは5つのパートで成り立っています。: **パラメータ タイトル **、**パラメータオプション使用**、 **パラメータデータ**、 **問い合わせモードスイッチ**、**アラートオプション**。

#### パラメータ タイトル

パラメータのタイトルは通常、SWATのナレッジエンジンによって自動的に抽出されます。**オペレーションカスタマイゼイション**画面で手動によるタイトル編集が可能です。

### パラメータオプションの使用

オプションは、**パラメータタイトル**の隣にあるチェックボックスです。これはデフォルトでチェックされ、パラメータは実行時に使用されることを意味します。ノードをオフにした場合、オペレーションを実行する際、ノード上の任意のインタラクションは生じません。詳細はこちらを参照ください。[Ignoring Parameter](#Ignoring_Parameter) 

Hint: もしオペレーション中に5つ以上のパラメータががある場合、一番下の**パラメータオプション**を使用しすべて切り替えるチェックボックスを利用します。

#### パラメータ データ＆問合せm-度スイッチ

これら**パラメータデータ**には４つのタイプがあります。: ノードの種類毎に`Text`, `Select`, `Multi-select`, `Execute`  

* `Text`: 実際のテキストは、テキスト領域やテキストボックスなどのようなテキストタイプノードで入力。
* `Select`: SELECTなどセレクトタイプに指定されたノードで選択したオプション。 そのようなラジオグループとして相互に排他的な入力を持つコレクションや、このタイプに属するリンク・ボタンのグループ。
* `Multi-select`: 複数選択などのマルチセレクトタイプに指定されたノードで選択したオプション。そのようなチェックボックスグループなどの非排他的な入力を持つコレクションもこのタイプに含まれています。
* `Execute`: そのような単一のリンクとしてパラメータを指定せずにアクションに使用。このタイプのパラメータは、<span class="glyphicon glyphicon-play"></span>に続いてテキストボックスとして表示されます。テキストボックスは、パラメータを無視することができるように、変数を設定することができます。詳細はこちら参照ください。 [Ignoring Parameter](#Ignoring_Parameter)

`Select`と`Multi-select`のケースで**Querying Mode Switch**をクリックし問合せモードへ切り換えることができれば、次の**Parameter Data**　 <span class="glyphicon glyphicon-refresh"></span>アイコン。 詳細はこちらを参照ください。 [Querying Modes](#Querying_Modes)

#### アラート　オプション

**パラメータデータ**の下に表示されているアラートのオプションはアラートのノードのために使用できます。 SWATの**オペレーションカスタマイズ**でアラートを待機する時間のためのノードを定義することができます。アラートを処理するための3つのオプションがあります。

* `Accept`: **OK**をクリックして、警告を受け入れます。
* `Dismiss`: **Cancel**をクリックして、アラートを閉じます。
* `No Alert`: アラートが表示されません。

シナリオでアラートの利用方法はこちらを参照ください。 [Window, Frame, Alert, AJAX](guide_scenes.md) 

Attention: 予想外のアラートは、実行中にエラーが発生しアラートが表示されない場合、オペレーションはエラーで返されます。

#### エラー

Webオペレーションは、検証中や実行中にさまざまなエラーが発生する場合があります。もっとも共通的なエラーを以下に記します。:

* パラメータデータが有効ではありません。 (検証中と実行中)
`Text Query`のパラメータ値、`Index Query` は有効でありません。詳細はこちらを参照ください。 [Querying Modes](#Querying_Modes) パラメータで変数を使用する場合、エラーは実行時に検出されます。
* 対象画面が見つかりません。(実行中)
対象画面の画面識別で定義されているマッチングルールを満たしていない場合に発生するエラーです。
* 対象オペレーションが見つかりません。(実行中)
期待されたオペレーションが存在しません。
* 対象ノードが見つかりません。(実行中)
期待されたノードが存在しません。
* 対象サブノードが見つかりません。(実行中)
問い合せモードで、パラメータの入力に基づき一致した結果が見つかりません。

#### エビデンス

すべてのWebオペレーションは、実行後に起動したウィンドゥ画面が以下のように基本的なエビデンスになります。もしオペレーションが、入力やサブミットなどのいくつかのステップが含まれている場合、余分なのスクリーンショットは最後のステップの前に取得されます。 オペレーションの中に任意のアラート処理があった場合アラートのためのエビデンスも利用可能になります。

* スクリーンショット
* HTML
* サブミット前のスクリーンショット
* JSONテキストフォーマットでアラート情報

もし他のウィンドゥ画面でエビデンスを取得したい場合、対象ウィンドゥ画面で作動させるためにシステムオペレーションの**Window Control**を加える必要があります。

問合せモード
---

パラメーターは、サブノードを選択すべきでコレクションノードに関連している場合、パラメータは３つの問合せモードを持ちます。: `Static Select`, `Text Query`, `Index Query`　次のパラメータデータフィールドに <span class="glyphicon glyphicon-refresh"></span>アイコンをクリックし切りけることができます。 

#### 静的選択モード

これはコレクションノードに関連するパラメータのデフォルトモードです。 パラメータデータフィールドはセレクトかマルチセレクトかのフォームです。SWATは画面ナレッジで定義されている選択プロパティを使用しサブノードを検索します。

* マルチセレクトタイプのノードでは、いくつかのサブのノードを選択することができます。
* サブノード自身がコレクションノードがある場合、このモードは使用できません。 `テキスト問合せモード`はこのケースでデフォルトです。
* 変数は使用でいません。

#### テキスト問合せモード

パラメータデータフィールドは、以下テキストボックスとして表示します。 <span class="glyphicon glyphicon-font"></span>　 SWATは順序の考えで、最初に一致したノードが見つかるまでこれらを使いサブノードを検索します。 `equal`, `startWith`, `contain` 

* マルチセレクトタイプのノードでは、いくつかのサブノード問合せテキストやセレクトモードの空白を指定するのに `,`　を使用します。 例えば、 `red,blue`は、テキスト` red`とテキスト`blue`を含むサブノードを選択します。
* シングルセレクトタイプのノードでは、空白は許可されていません。
* 変数は使用できません。

#### インデックス問合せモード

パラメータデータフィールドは、以下テキストボックスとして表示されます。 <span class="glyphicon glyphicon-th-list"></span>　 SWATは、位置によってサブノードを検索します。 インデックス`1`やそれ以上大きい数字は最初のサブノードを指定するために使用し、インデックス `-1`やそれより小さな数字は最後のサブノードやそれ以前を指定するために使用します。

* マルチセレクトタイプのノードでは、いくつかのサブノード問合せインデックスや空白を指定するのに　`,` を使用します。例えば、 `1,2`は、`1`と`2`の位置でサブノードを選択します。 
* シングルセレクトノードでは、`0` を除く整数のみ許可します。
* Variables can be used.

変数の使用
---

データとシナリオを分離するために、パラメータデータフィールドに`@{VAR}`の形式で変数を設定することができます。 シナリオ/フローのすべての変数は**SetValue**によって設定されたものを除きます。 **API Call**オペレーションは、シナリオ/フローのパラメータからなっています。 The variable set by **Set Value**, **SetValue**によって設定された変数や、 ** API Call**オペレーションが、実行中のシステム操作から値を取得するには、 外部のデータソースを必要としません。

変数を使用するには、以下の規則に準拠します。:

* 変数名は数字、アルファベット、日本語、漢字と `_`の文字列でなければなりません。
* `@{VAR1}のABC@ {var2は}`のような1つのパラメータ·データ·フィールド内の複数の変数を使用することができます。
* 変数は、テキスト入力したパラメータで使用することができます。 変数を使用する前に他のクエリモードに選択または複数選択の形でパラメータを切り替える必要があります。
* 変数を使用する場合、検証エラーが実行されるまで検出されません。.

パラメータを無視
---

パラメータを無視するは、ノードが実行中のパラメータに対応すると対話したくないことを意味します。 基本的には、パラメータの**パラメータオプション使用**をオフにしておくことができます。 

実際には、実行中のパラメータを無視するには、いくつかの方法があります。

1. シナリオ/フロービルダーで、パラメータの**パラメータオプション使用**のチェックを外す。
2. データダイアログケースでパラメータと関係あるすべての変数の**データオプション使用**のチェックを外す。 (それをするめ export/import機能のケースを使います。)
3. 親ノードのパラメータを無視します。例えば、そのような各行に入力を持つテーブル操作などの複雑なネストされたノードの動作が発生する可能性があります。行を選択した親ノードを無視すると、子ノード（行の入力）も、実行時に無視されます。
4. Ignore the operation. When an operation is ignored, all the parameters in the operation will be ignored too.

オペレーションを無視
---

それは単にそれを追加できないので、シナリオ/フロー·ビルダーのオペレーションを無視しようとすることは無意味です。しかしながら、 時には、ケースによってはオペレーションを無視する必要があるかもしれません。 

変数無視することによって、パラメータを無視するポリシーと同様に, ケースデータダイアログでオペレーションに関連するすべての変数の**データオプション使用**のチェックを外したときに、全体の動作を無視することができます。 (それをするためEexport/import機能を使います。) 
例えば、 *検索ボッス*、*検索ボタン*の*検索*オペレーションを持ち、*検索ボックス*のための変数1`@{SearchKey}`を使用します。この場合は変数 `SearchKey`の**データオプション使用**_をオフにして*検索*オペレーションをバイパスすることができます。


オペレーションは無視されている場合、テスト結果のオペレーションとエビデンスを見ることができません。

Note: オペレーションのすべてのパラメータを無視した場合、操作は対話なしに実行されます。 実行中の会話がないにもかかわらず、テスト結果のオペレーションのエビデンスにアクセスすることができます。
