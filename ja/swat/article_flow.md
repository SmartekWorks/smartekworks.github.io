フローの活用
===

シナリオを簡単に再利用、簡単に編集可能にするためにフローを利用し、シナリオをカプセル化することを推奨します。

フローとは？
---

それを簡単に説明すると、Webオペレーションを複数組み合わせ、それを一つにまとめたサブシナリオのイメージです。このようなサブシナリオを再利用し、サブシナリオの組合せ（フローの組合せ）で簡単にシナリオを作成できます。また、フロー内でWebオペレーションが変更されても、そのシナリオ自体を変更する必要はありません。

しかし、フローの意味は共通のサブシナリオよりも更に進んでます。

フローを使用すると、Webアプリの操作を知らずにシナリオを構築することができます。 例えば、フローでビジネスルールに基づいたシナリオが作成できます。以下参照ください。

1. インターネットバンキングのサイトにログインします。
2. 口座残高を確認します。
3. 誰かに2万円振り込みます。
4. 口座残高（-2万円)を再度確認します。

フローは特定のビジネスで目的を達成するための一連のオペレーションを定義しているため、上記のシナリオを作成する際に、インターネットバンキングサイトとやり取りする方法を知る必要はありません。

Hint: ビジネス上で意味を持つフローを作成することがベストプラクティスです。

なぜフローを使うか？
---

では、フローを使うメリットをまとめます。

* シナリオは簡単で理解し易い。
* シナリオ作成をより効率的にする。
* シナリオの保守が簡単
* 画面ナレッジを準備する前にシナリオが作成できる。

フローの作成
---

フローを作成するには、下記操作を参照ください。

1. ナレッジメニューから**フロー**を選び、**フローナレッジ** 画面を表示します。(既存のフローが無い場合は、**フロービルダー**画面が表示されます）
2. <span class="glyphicon glyphicon-plus"></span>ボタンをクリックし、新しいフローを追加します。 **フロービルダー**画面が表示されます。
3. ドラッグ＆ドロップでシステムオペレーションやWebオペレーションを組み立て、それらのオペレーションのパラメータを入力します。
4. フロー内のパラメータ値を変数にする場合が多いです。シナリオでこのフローを使用するときは、それら変数で指定した箇所に値を設定することができます。
5. フロータイトルを入力し、**新規**ボタンをクリックするとフローの作成が完了します。
6. **フローナレッジ**画面では、 フローのパラメータと各ステップ情報を含むフロー情報を参照することができます。

フローの利用
---

[Webオペレーション](ref_web_operation.md#How_to_Use_Web_Operations?)を使うように、 **テストシナリオビルダー**画面でフローがドラッグ＆ドロップできます。しかし、フローとWebオペレーションとは、いくつか違う点があります。

#### パラメータ

フローのパラメータはフロー内で使っている変数で、Webオペレーションのパラメータは画面ナレッジからです。そのため、Webオペレーションのパラメータの以下のような特徴を持っています。

* パラメータタイプは`Text`のみ。
* パラメータのクエリモードがない。
* アラートを処理する機能がオプションがない。

また、フローパラメータをシナリオパラメータとして使うことが多いので、フローをシナリオにドラッグ＆ドロップする際に、自動的にそのパラメータ名を使用した変数をパラメータに記入します。

#### エラーとエビデンス

フローがコンテナであるため、エラーやエビデンスがありません。

#### フローを無視

Webオペレーションの無視と同じく、ケースデータダイアログに特定なフローに関連するすべての変数の**パラメータ有効**チェックボックスをオフにしたときに、実行中に特定なフローを無視することができます。（ケースの出力、インポートでのケース設定でも利用可能です。）
